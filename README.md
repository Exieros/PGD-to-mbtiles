# PGD-to-mbtiles: Работа с проприетарным форматом PGD из AlpineQuest (Offline Maps)
Скрипт не связан с разработчиками AlpineQuest и предоставляется "как есть".

## Назначение
Конвертирует карты проприетарного формата PGD Alpine Quest (Offline Maps) в mbtiles [пакетно]
Если у вас на руках только файлы слоев PGD, вы можете конвертировать их в mbtiles, которое поддерживается преобладающим количеством картографических приложений, например Guru Maps на ios(так же опционально можно сгенерировать *.ms для него чтобы слой оторажался с наложением на карту)

## Установка зависимостей
```sh
python -m pip install -r requirements.txt
```

## Использование
```sh
python pgd_assemble.py [--pgd path/to/file.pgd] \
	[--format {webp|png}] \
	[--save-mosaic] \
	[--save-bounds] \
	[--save-ms] \
	[--ms-opacity O] \
	[--zoom-pad N] \
	[--max-zoom-pad M] \
	[--no-dedup]
```
- `--pgd` — путь к PGD-файлу; если флаг не указан, откроется диалог выбора (можно выбрать несколько файлов, обработка выполнится для каждого).
- `--format` — формат изображений (`webp` или `png`).
- `--save-mosaic` — сохранить промежуточную мозаику.
- `--save-bounds` — записать `*_bounds.json` с охватом карты.
- `--save-ms` — создать профиль Guru Maps (`*.ms`). GuruMaps игнорирует type=overlay в метаданных.
- `--ms-opacity` — задать `opacity` (0..1) внутри `.ms` (работает только вместе с `--save-ms`).
- `--zoom-pad` — отступ вниз от автоматически вычисленного максимального зума (нижние уровни строятся из тайлов максимального масштаба — без геометрического дрейфа).
- `--max-zoom-pad` — сдвиг максимального зума относительно вычисленного значения (например, -1 для перемещения на уровень вниз. Это может сэкономить место так как mbtiles не позволяет хранить изображения так же компактно, как pgd).
- `--no-dedup` — отключить дедупликацию одинаковых тайлов.

**@soreixe**